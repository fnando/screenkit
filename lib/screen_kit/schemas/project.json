{
  "$id": "https://github.com/fnando/screenkit/schemas/project/v1.json",
  "title": "ScreenKit Project Configuration",
  "description": "Schema for ScreenKit project configuration file (screenkit.yml)",
  "type": "object",
  "required": [
    "schema",
    "backtracks_dir",
    "episodes_dir",
    "output_dir",
    "logo_path",
    "sounds_dir",
    "logo_sound",
    "scenes",
    "callouts"
  ],
  "properties": {
    "schema": {
      "type": "integer",
      "description": "The schema version number",
      "enum": [1]
    },
    "backtracks_dir": {
      "type": "string",
      "description": "Directory containing background music files"
    },
    "episodes_dir": {
      "type": "string",
      "description": "Directory where source files for each episode are stored"
    },
    "output_dir": {
      "type": "string",
      "description": "Directory where generated video files will be saved. Supports placeholders like %{episode_number} and %{episode_slug}"
    },
    "logo_path": {
      "type": "string",
      "description": "Path to the logo to be displayed in the video intro"
    },
    "sounds_dir": {
      "type": "string",
      "description": "Directory containing sound effect files"
    },
    "logo_sound": {
      "type": "string",
      "description": "Sound to be played with the logo in the intro (without extension)"
    },
    "scenes": {
      "type": "object",
      "description": "Scene configurations for different parts of the video",
      "required": ["intro", "outro", "segment"],
      "properties": {
        "intro": {
          "$ref": "#/$defs/introScene"
        },
        "outro": {
          "$ref": "#/$defs/outroScene"
        },
        "segment": {
          "$ref": "#/$defs/segmentScene"
        }
      },
      "additionalProperties": false
    },
    "callouts": {
      "type": "object",
      "description": "Callout configurations for different types (info, warning, etc.)",
      "additionalProperties": {
        "$ref": "#/$defs/callout"
      }
    }
  },
  "additionalProperties": false,
  "$defs": {
    "introScene": {
      "type": "object",
      "description": "Opening scene configuration",
      "required": ["duration", "fade_in", "fade_out", "font_file"],
      "properties": {
        "duration": {
          "type": "number",
          "description": "Duration of the intro scene in seconds",
          "minimum": 0
        },
        "fade_in": {
          "type": "number",
          "description": "Fade-in duration in seconds",
          "minimum": 0
        },
        "fade_out": {
          "type": "number",
          "description": "Fade-out duration in seconds",
          "minimum": 0
        },
        "font_file": {
          "type": "string",
          "description": "Font file path for text in the intro scene"
        }
      },
      "additionalProperties": false
    },
    "outroScene": {
      "type": "object",
      "description": "Closing scene configuration",
      "required": ["duration", "fade_in", "fade_out"],
      "properties": {
        "duration": {
          "type": "number",
          "description": "Duration of the outro scene in seconds",
          "minimum": 0
        },
        "fade_in": {
          "type": "number",
          "description": "Fade-in duration in seconds",
          "minimum": 0
        },
        "fade_out": {
          "type": "number",
          "description": "Fade-out duration in seconds",
          "minimum": 0
        }
      },
      "additionalProperties": false
    },
    "segmentScene": {
      "type": "object",
      "description": "Main content scene configuration",
      "required": ["crossover_duration"],
      "properties": {
        "crossover_duration": {
          "type": "number",
          "description": "Duration of the crossover transition between segments in seconds",
          "minimum": 0
        }
      },
      "additionalProperties": false
    },
    "callout": {
      "type": "object",
      "required": [
        "icon",
        "background",
        "title",
        "body",
        "padding",
        "border_radius",
        "anchor",
        "animation"
      ],
      "properties": {
        "icon": {
          "type": "string",
          "description": "Path to the icon image"
        },
        "background": {
          "type": "string",
          "description": "Background color (hex format with optional alpha)",
          "pattern": "^#[0-9a-fA-F]{6}([0-9a-fA-F]{2})?$"
        },
        "title": {
          "$ref": "#/$defs/textStyle"
        },
        "body": {
          "$ref": "#/$defs/textStyle"
        },
        "padding": {
          "type": "array",
          "description": "Padding values [vertical, horizontal]",
          "items": {
            "type": "integer",
            "minimum": 0
          },
          "minItems": 2,
          "maxItems": 2
        },
        "border_radius": {
          "type": "integer",
          "description": "Border radius in pixels",
          "minimum": 0
        },
        "anchor": {
          "type": "array",
          "description": "Anchor position [vertical, horizontal]",
          "items": {
            "type": "string",
            "enum": ["top", "center", "bottom", "left", "right"]
          },
          "minItems": 2,
          "maxItems": 2
        },
        "animation": {
          "$ref": "#/$defs/animation"
        },
        "sound": {
          "$ref": "#/$defs/soundEffects"
        }
      },
      "additionalProperties": false
    },
    "textStyle": {
      "type": "object",
      "description": "Text styling configuration",
      "required": ["color", "size", "font_file"],
      "properties": {
        "color": {
          "type": "string",
          "description": "Text color (hex format with optional alpha)",
          "pattern": "^#[0-9a-fA-F]{6}([0-9a-fA-F]{2})?$"
        },
        "size": {
          "type": "integer",
          "description": "Font size in pixels",
          "minimum": 1
        },
        "font_file": {
          "type": "string",
          "description": "Path to the font file"
        }
      },
      "additionalProperties": false
    },
    "animation": {
      "type": "object",
      "description": "Animation configuration",
      "required": [
        "enter",
        "enter_duration",
        "exit",
        "exit_duration",
        "motion_blur"
      ],
      "properties": {
        "enter": {
          "type": "string",
          "description": "Enter animation type",
          "enum": [
            "slide_left",
            "slide_right",
            "slide_up",
            "slide_down",
            "fade",
            "zoom"
          ]
        },
        "enter_duration": {
          "type": "number",
          "description": "Enter animation duration in seconds",
          "minimum": 0
        },
        "exit": {
          "type": "string",
          "description": "Exit animation type",
          "enum": [
            "slide_left",
            "slide_right",
            "slide_up",
            "slide_down",
            "fade",
            "zoom"
          ]
        },
        "exit_duration": {
          "type": "number",
          "description": "Exit animation duration in seconds",
          "minimum": 0
        },
        "motion_blur": {
          "type": "boolean",
          "description": "Whether to apply motion blur to animations"
        }
      },
      "additionalProperties": false
    },
    "soundEffects": {
      "type": "object",
      "description": "Sound effects for callout animations",
      "properties": {
        "enter": {
          "$ref": "#/$defs/soundConfig"
        },
        "exit": {
          "$ref": "#/$defs/soundConfig"
        }
      },
      "additionalProperties": false
    },
    "soundConfig": {
      "oneOf": [
        {
          "type": "string",
          "description": "Sound name (without extension)"
        },
        {
          "type": "object",
          "description": "Sound configuration with volume",
          "required": ["sound", "volume"],
          "properties": {
            "sound": {
              "type": "string",
              "description": "Sound name (without extension)"
            },
            "volume": {
              "type": "number",
              "description": "Volume level (0.0 to 1.0)",
              "minimum": 0,
              "maximum": 1
            }
          },
          "additionalProperties": false
        }
      ]
    }
  }
}
